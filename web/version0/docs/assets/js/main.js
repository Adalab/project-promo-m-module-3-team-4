"use strict";let data={palette:"1",name:"",job:"",phone:"",email:"",linkedin:"",github:"",photo:""},selectionDesign=document.querySelector(".js-design"),selectionDesignButton=document.querySelector(".js-designButton"),selectionFill=document.querySelector(".js-fill"),selectionFillButton=document.querySelector(".js-fillButton"),messageFill=document.querySelector(".js-tooltipFill"),selectionShare=document.querySelector(".js-share"),selectionShareButton=document.querySelector(".js-shareButton"),messageShare=document.querySelector(".js-tooltipShare");const form=document.querySelector(".js-form"),previewNameElemento=document.querySelector(".js-nameProfile"),previewRoleElemento=document.querySelector(".js-rolProfile"),previewPhoneElement=document.querySelector(".js-phone"),previewMailElement=document.querySelector(".js-mail"),previewLinkedinElement=document.querySelector(".js-linkedin"),previewGithubElement=document.querySelector(".js-github"),generalColors=document.querySelector(".js_generalcolor"),circleSocialnetwork=document.querySelectorAll(".container-profile__containerrrss__rrss"),profileName=document.querySelector(".profile__name"),createButton=document.querySelector(".js-create-card"),responseElement=document.querySelector(".js-response"),cardCreated=document.querySelector(".card--created"),responseUrl=document.querySelector(".js-url"),resetButton=document.querySelector(".js-reset"),namelocal=document.querySelector(".fill__contact-name"),jobLocal=document.querySelector(".fill__contact-role"),emailLocal=document.querySelector(".fill__contact-email"),phoneLocal=document.querySelector(".fill__contact-phone"),linkedinLocal=document.querySelector(".fill__contact-linkedin"),githubLocal=document.querySelector(".fill__contact-github");function collapseValidationDesign(){selectionDesign.classList.toggle("none"),selectionDesignButton.classList.toggle("arrowPointer")}function collapseValidationFill(e){!1===validationDesign?(messageFill.classList.toggle("none"),messageFill.style.top=e.pageY-15+"px",setTimeout((function(){messageFill.classList.toggle("none")}),5e3)):(selectionFill.classList.toggle("none"),selectionFillButton.classList.toggle("arrowPointer"))}function collapseValidationShare(e){!1===validationDesign||!1===validationFill?(messageShare.classList.toggle("none"),messageShare.style.top=e.pageY-25+"px",setTimeout((function(){messageShare.classList.toggle("none")}),5e3)):(selectionShare.classList.toggle("none"),selectionShareButton.classList.toggle("arrowPointer"))}selectionDesignButton.addEventListener("click",collapseValidationDesign),selectionFillButton.addEventListener("click",(function(e){validateDesignSection(),collapseValidationFill()})),selectionShareButton.addEventListener("click",(function(e){validateFillSection(),collapseValidationShare(e)}));let validationDesign=!1;function validateDesignSection(){document.querySelectorAll('input[name="palette"]').forEach(e=>{e.checked&&(validationDesign=!0)})}validateDesignSection();let inputName=document.querySelector(".fill__contact-name"),validateName=!1;function validationNameLocalStorage(){data.name&&(validateName=!0)}function validationName(){let e=data.name,t=document.querySelector(".js-validationName");""===e?t.classList.remove("none"):(validateName=!0,t.classList.add("none"))}inputName.addEventListener("blur",validationName);let inputJob=document.querySelector(".fill__contact-role"),validateJob=!1;function validationJobLocalStorage(){data.job&&(validateJob=!0)}function validationJob(){let e=data.job,t=document.querySelector(".js-validationJob");""===e?t.classList.remove("none"):(validateJob=!0,t.classList.add("none"))}inputJob.addEventListener("blur",validationJob);let inputPhoto=document.querySelector(".fill__contact-image"),fileTypes=["image/jpg","image/png","image/jpeg","image/gif","image/svg"],validationFileType=e=>fileTypes.includes(e.type),validatePhoto=!1;function validationPhotoLocalStorage(){data.photo&&(validatePhoto=!0)}function validationPhoto(e){let t=document.querySelector(".js-validationPhoto"),a=document.querySelector(".js-validationPhotoTwo"),o=document.querySelector(".js-validationPhotoThree"),l=inputPhoto.files.item(0);0===inputPhoto.files.length?t.classList.remove("none"):validationFileType(l)?l.size>=400096?o.classList.remove("none"):(validatePhoto=!0,t.classList.add("none"),a.classList.add("none"),o.classList.add("none")):a.classList.remove("none")}inputPhoto.addEventListener("change",validationPhoto);let inputEmail=document.querySelector(".fill__contact-email"),validateEmail=!1;function validationEmailLocalStorage(){data.email&&(validateEmail=!0)}function validationEmail(){let e=data.email.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/),t=document.querySelector(".js-validationEmail");e?(validateEmail=!0,t.classList.add("none")):t.classList.remove("none")}inputEmail.addEventListener("blur",validationEmail);let inputPhone=document.querySelector(".fill__contact-phone"),validatePhone=!1;function validationPhoneLocalStorage(){data.phone&&(validatePhone=!0)}function validationPhone(){let e=data.phone,t=e.match(/^[0-9]+$/),a=document.querySelector(".js-validationPhone");""!==e&&t?(validatePhone=!0,a.classList.add("none")):a.classList.remove("none")}inputPhone.addEventListener("blur",validationPhone);let inputLinkedin=document.querySelector(".fill__contact-linkedin"),validateLinkedin=!1;function validationLinkedinLocalStorage(){data.linkedin&&(validateLinkedin=!0)}function validationLinkedin(){let e=data.linkedin,t=document.querySelector(".js-validationLinkedin ");""===e?t.classList.remove("none"):(validateLinkedin=!0,t.classList.add("none"))}inputLinkedin.addEventListener("blur",validationLinkedin);let inputGithub=document.querySelector(".fill__contact-github"),validateGithub=!1;function validationGithubLocalStorage(){data.github&&(validateGithub=!0)}function validationGithub(){let e=data.github,t=document.querySelector(".js-validationGithub ");""===e?t.classList.remove("none"):(validateGithub=!0,t.classList.add("none"))}inputGithub.addEventListener("blur",validationGithub);let validationFill=!1;function validateFillSection(){validateName&&validateJob&&validatePhoto&&validateEmail&&validatePhone&&validateLinkedin&&validateGithub&&(validationFill=!0)}function changedForm(e){const t=e.target.name,a=e.target.value;data[t]=a,console.log(data)}function refreshData(){previewNameElemento.innerHTML=""===data.name?"Nombre Apellido":data.name,previewRoleElemento.innerHTML=""===data.job?"Front-end developer":data.job,previewPhoneElement.href="https://api.whatsapp.com/send?phone="+data.phone,previewMailElement.href="mailto:"+data.email,previewLinkedinElement.href=data.linkedin,previewGithubElement.href=data.github}function handleChangeForm(e){handlerChangecolor(e),changedForm(e),refreshData()}function handlerChangecolor(e){const t=e.target.value;if("1"===t){previewNameElemento.style.color="#114e4e",profileName.style.borderLeft="#438792 solid 5px";for(let e=0;e<circleSocialnetwork.length;e++)circleSocialnetwork[e].style.border="#a2deaf solid 2px",circleSocialnetwork[e].style.color="#114e4e"}if("2"===t){previewNameElemento.style.color="#420101",profileName.style.borderLeft="#bd1010 solid 5px";for(let e=0;e<circleSocialnetwork.length;e++)circleSocialnetwork[e].style.border="#E95626 solid 2px",circleSocialnetwork[e].style.color="#420101"}if("3"===t){previewNameElemento.style.color="#3e5b65",profileName.style.borderLeft="#eab052 solid 5px";for(let e=0;e<circleSocialnetwork.length;e++)circleSocialnetwork[e].style.border="#a0c0cf solid 2px",circleSocialnetwork[e].style.color="#3e5b65"}}validateFillSection(),form.addEventListener("change",handleChangeForm);const fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,data.photo=fr.result}function fakeFileClick(){fileField.click()}function handleClickCreate(e){e.preventDefault(),fetch("https://awesome-profile-cards.herokuapp.com/card",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(data)}).then(e=>e.json()).then(e=>{!1===e.success?(responseElement.classList.remove("none"),responseElement.innerHTML="Tienes que rellenar los campos"):(responseUrl.innerHTML=`<a href='${e.cardURL}' target="_blank">Pincha aquí para ver tu tarjeta</a>`,createButton.classList.add("none"),createAncla(e.cardURL)),cardCreated.classList.remove("none"),anclaTwitter.classList.remove("none")}).catch(()=>{responseElement.innerHTML="Inténtalo más tarde."}),localStorage.setItem("profile",JSON.stringify(data))}function reset(){data={palette:"1",name:"",job:"",phone:"",email:"",linkedin:"",github:"",photo:""},resetChangeColor(),resetForm(),refreshData(),localStorage.clear()}function resetChangeColor(e){"1"!==document.querySelectorAll(".palette__wrapper")&&(previewNameElemento.style.color="#114e4e",profileName.style.borderLeft="#438792 solid 5px");for(let e=0;e<circleSocialnetwork.length;e++)circleSocialnetwork[e].style.border="#a2deaf solid 2px",circleSocialnetwork[e].style.color="#114e4e"}function resetForm(){form.reset(),profileImage.style.backgroundImage="url('./assets/images/img-default.jpg')",profilePreview.style.backgroundImage=""}fileField.addEventListener("change",getImage),createButton.addEventListener("click",handleClickCreate),resetButton.addEventListener("click",reset);let dataSave=[];function printAfterReload(){null!==dataSave&&(data=dataSave,refreshData2(),console.log(dataSave),console.log(data),validationNameLocalStorage(),validationJobLocalStorage(),validationPhotoLocalStorage(),validationEmailLocalStorage(),validationPhoneLocalStorage(),validationLinkedinLocalStorage(),validationGithubLocalStorage(),validateFillSection())}function refreshData2(){namelocal.value=dataSave.name,jobLocal.value=dataSave.job,emailLocal.value=dataSave.email,phoneLocal.value=dataSave.phone,linkedinLocal.value=dataSave.linkedin,githubLocal.value=dataSave.github,previewNameElemento.innerHTML=dataSave.name,previewRoleElemento.innerHTML=dataSave.job,previewPhoneElement.href="https://api.whatsapp.com/send?phone="+dataSave.phone,previewMailElement.href="mailto:"+dataSave.email,previewLinkedinElement.href="https://www.linkedin.com/in/"+dataSave.linkedin,previewGithubElement.href="https://github.com/"+dataSave.github;const e=dataSave.palette;if("1"===e){previewNameElemento.style.color="#114e4e",profileName.style.borderLeft="#438792 solid 5px";for(let e=0;e<circleSocialnetwork.length;e++)circleSocialnetwork[e].style.border="#a2deaf solid 2px",circleSocialnetwork[e].style.color="#114e4e"}if("2"===e){previewNameElemento.style.color="#420101",profileName.style.borderLeft="#bd1010 solid 5px";for(let e=0;e<circleSocialnetwork.length;e++)circleSocialnetwork[e].style.border="#E95626 solid 2px",circleSocialnetwork[e].style.color="#420101";document.querySelector(".js-palette2").checked=!0}if("3"===e){previewNameElemento.style.color="#3e5b65",profileName.style.borderLeft="#eab052 solid 5px";for(let e=0;e<circleSocialnetwork.length;e++)circleSocialnetwork[e].style.border="#a0c0cf solid 2px",circleSocialnetwork[e].style.color="#3e5b65";document.querySelector(".js-palette3").checked=!0}}dataSave=JSON.parse(localStorage.getItem("profile")),printAfterReload();let anclaTwitter=document.querySelector(".js-aTwitter"),shareURLTwitter="https://twitter.com/intent/tweet?text=";function createAncla(e){let t=encodeURIComponent(e);anclaTwitter.setAttribute("href",shareURLTwitter+t)}